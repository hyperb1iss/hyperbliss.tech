---
description: 
globs: 
alwaysApply: false
---
# ðŸ§© Component Architecture

## ðŸ“‚ Organization

Components are organized in the `app/components/` directory following a feature-based structure:

```
app/components/
â”œâ”€â”€ layout/           # Structural components (Header, Footer, etc.)
â”œâ”€â”€ shared/           # Reusable UI elements (Button, Card, etc.)
â”œâ”€â”€ blog/             # Blog-specific components
â”œâ”€â”€ projects/         # Project-specific components
â”œâ”€â”€ about/            # About page components
â”œâ”€â”€ animations/       # Animation-related components
â”‚   â”œâ”€â”€ glitch/       # Glitch effect components
â”‚   â””â”€â”€ sparkle/      # Sparkle effect components
â””â”€â”€ seo/              # SEO-related components
```

## ðŸ—ï¸ Component Patterns

### Functional Components with TypeScript

```tsx
import React from 'react';
import { css } from 'styled-system/css';

// Define types/interfaces for props
interface ButtonProps {
  label: string;
  onClick: () => void;
  variant?: 'primary' | 'secondary' | 'ghost';
  size?: 'small' | 'medium' | 'large';
  customColor?: string;
}

// Component implementation
const Button: React.FC<ButtonProps> = ({
  label,
  onClick,
  variant = 'primary',
  size = 'medium',
  customColor,
}) => {
  return (
    <button
      onClick={onClick}
      className={buttonStyles({ variant, size, customColor })}
    >
      {label}
    </button>
  );
};

export default Button;
```

## ðŸŽ¨ Styling Approach

Components use Panda CSS (zero-runtime CSS-in-JS) with these patterns:

### Panda CSS Styling with Template Literals

```tsx
import { css } from 'styled-system/css';

// Style function using template literal syntax
const buttonStyles = (props: {
  variant: 'primary' | 'secondary' | 'ghost';
  size: 'small' | 'medium' | 'large';
  customColor?: string;
}) => css`
  /* Base styles */
  border-radius: 50px;
  border: 2px solid var(--color-primary);
  transition: all 0.3s ease;
  cursor: pointer;

  /* Size variations */
  padding: ${props.size === 'small' ? '0.5rem 1rem' :
             props.size === 'large' ? '1.5rem 3rem' : '1rem 2rem'};

  /* Variant styles */
  background-color: ${props.variant === 'primary' ? 'var(--color-primary)' : 'transparent'};

  /* Custom color override if provided */
  ${props.customColor ? `
    color: ${props.customColor};
    border-color: ${props.customColor};
  ` : ''}

  /* Hover effects */
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(162, 89, 255, 0.4);
  }
`;

// Alternative: Using Panda CSS recipes for type-safe variants
import { cva } from 'styled-system/css';

const buttonRecipe = cva({
  base: {
    borderRadius: '50px',
    border: '2px solid var(--color-primary)',
    transition: 'all 0.3s ease',
    cursor: 'pointer',
    _hover: {
      transform: 'translateY(-2px)',
      boxShadow: '0 4px 8px rgba(162, 89, 255, 0.4)',
    },
  },
  variants: {
    variant: {
      primary: { backgroundColor: 'var(--color-primary)' },
      secondary: { backgroundColor: 'transparent' },
      ghost: { backgroundColor: 'transparent', border: 'none' },
    },
    size: {
      small: { padding: '0.5rem 1rem' },
      medium: { padding: '1rem 2rem' },
      large: { padding: '1.5rem 3rem' },
    },
  },
  defaultVariants: {
    variant: 'primary',
    size: 'medium',
  },
});
```

## ðŸ§° Custom Hooks

Common hooks are stored in `app/hooks/` and follow these patterns:

```tsx
import { useState, useEffect, useCallback } from 'react';

// Hook with proper typing
function useWindowSize() {
  // Define typed state
  const [windowSize, setWindowSize] = useState<{
    width: number | undefined;
    height: number | undefined;
  }>({
    width: undefined,
    height: undefined,
  });
  
  // Memoized event handler
  const handleResize = useCallback(() => {
    setWindowSize({
      width: window.innerWidth,
      height: window.innerHeight,
    });
  }, []);

  useEffect(() => {
    // Handle initial load
    handleResize();
    
    // Add event listener
    window.addEventListener('resize', handleResize);
    
    // Cleanup
    return () => window.removeEventListener('resize', handleResize);
  }, [handleResize]);

  return windowSize;
}

export default useWindowSize;
```

## ðŸ”„ State Management

- Use local component state for UI-specific state
- React Context for theme, user preferences, etc.
- Custom hooks for shared logic and effects

## ðŸŽ­ Animation Components

Animation components use Framer Motion with variants:

```tsx
import { motion } from 'framer-motion';

// Animation variants
const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.3,
    },
  },
  exit: {
    opacity: 0,
    transition: {
      when: 'afterChildren',
    },
  },
};

const itemVariants = {
  hidden: { y: 20, opacity: 0 },
  visible: {
    y: 0,
    opacity: 1,
    transition: {
      duration: 0.5,
      ease: 'easeOut',
    },
  },
  exit: {
    y: -20,
    opacity: 0,
    transition: {
      duration: 0.3,
    },
  },
};

const AnimatedList: React.FC<{ items: string[] }> = ({ items }) => {
  return (
    <motion.ul
      variants={containerVariants}
      initial="hidden"
      animate="visible"
      exit="exit"
    >
      {items.map((item, index) => (
        <motion.li key={index} variants={itemVariants}>
          {item}
        </motion.li>
      ))}
    </motion.ul>
  );
};
```

## ðŸ“¡ Data Fetching

Next.js data fetching patterns:

```tsx
// Using React Server Components
async function fetchProjectData() {
  // Server-side data fetching
  const response = await fetch('https://api.example.com/data');
  return response.json();
}

// In page component
export default async function ProjectPage() {
  const data = await fetchProjectData();
  
  return (
    <div>
      {/* Render with fetched data */}
    </div>
  );
}
```

## ðŸ§ª Testing Components

Component tests with React Testing Library:

```tsx
import { render, screen, fireEvent } from '@testing-library/react';
import Button from './Button';

describe('Button component', () => {
  it('renders correctly with label', () => {
    render(<Button label="Click me" onClick={() => {}} />);
    expect(screen.getByText('Click me')).toBeInTheDocument();
  });

  it('calls onClick when clicked', () => {
    const handleClick = jest.fn();
    render(<Button label="Click me" onClick={handleClick} />);
    fireEvent.click(screen.getByText('Click me'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });
});
```

